(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{18:function(e,t,n){},20:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(0),r=n.n(a),o=n(3),s=n.n(o),i=(n(18),n(10)),u=n(4),l=n(7),j=(n(19),n(20),function(e){var t=e.fetchImages;return Object(c.jsx)("button",{type:"button",onClick:t,className:"Button",children:"Load more..."})}),b=n(9),m=n.n(b),h=n(11),d="19045018-7ef62a7ed2607017cbe478eaf",f="https://pixabay.com/api/";function O(){return(O=Object(h.a)(m.a.mark((function e(t,n){var c,a,r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new URLSearchParams({key:d,q:t,page:n,per_page:12,image_type:"photo",orientation:"horizontal"}),a="".concat(f,"?").concat(c),e.next=4,fetch(a);case 4:return r=e.sent,e.next=7,r.json();case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p={fetchImages:function(e,t){return O.apply(this,arguments)}};function g(e){var t=e.onSubmit,n=Object(a.useState)(""),r=Object(u.a)(n,2),o=r[0],s=r[1];return Object(c.jsx)("header",{className:"Searchbar",children:Object(c.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),""!==o.trim()?(t(o),s("")):l.b.error("\u0421\u0430\u043c\u0443\u0440\u0430\u0439! \u041d\u0430\u043f\u0438\u0448\u0438 \u0437\u0430\u043f\u0440\u043e\u0441!")},children:[Object(c.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(c.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(c.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:o,onChange:function(e){s(e.currentTarget.value.toLowerCase())}})]})})}var x=function(e){var t=e.image,n=e.openModal,a=t.webformatURL,r=t.tags;return Object(c.jsx)("li",{id:t.id,onClick:n,className:"ImageGalleryItem",children:Object(c.jsx)("img",{src:a,alt:r,className:"ImageGalleryItem-image"})})};var v=function(e){var t=e.images,n=e.openModal;return Object(c.jsx)("div",{children:Object(c.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){return Object(c.jsx)(x,{openModal:n,image:e},e.id)}))})})},S=document.querySelector("#modal-root");function w(e){var t=e.onClose,n=e.children;return Object(a.useEffect)((function(){window.addEventListener("keydown",(function(e){"Escape"===e.code&&t()}))})),Object(o.createPortal)(Object(c.jsx)("div",{onClick:t,className:"Overlay",children:Object(c.jsx)("div",{children:n})}),S)}var y=n(12),I=n.n(y),N=(n(43),function(){return Object(c.jsx)(I.a,{type:"Circles",color:"#00BFFF",height:100,width:100,timeout:3e3})});function k(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(1),s=Object(u.a)(o,2),b=s[0],m=s[1],h=Object(a.useState)(null),d=Object(u.a)(h,2),f=d[0],O=d[1],x=Object(a.useState)(null),S=Object(u.a)(x,2),y=S[0],I=S[1],k=Object(a.useState)(!1),C=Object(u.a)(k,2),F=C[0],E=C[1],L=Object(a.useState)(!1),M=Object(u.a)(L,2),B=M[0],G=M[1];Object(a.useEffect)((function(){f&&(G("true"),p.fetchImages(f,b).then((function(e){r((function(t){return[].concat(Object(i.a)(t),Object(i.a)(e.hits))})),m(b),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){throw new Error(e)})).finally(G(!1)))}),[b,f]);var R=function(){return n.find((function(e){return e.id===y}))};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(g,{onSubmit:function(e){O(e),r([]),m(1)}}),Object(c.jsx)(v,{openModal:function(e){E(!0),I(Number(e.currentTarget.id))},images:n}),B&&Object(c.jsx)(N,{}),Object(c.jsx)(j,{fetchImages:function(){m((function(e){return e+1}))}}),Object(c.jsx)(l.a,{autoclose:3e3}),F&&Object(c.jsx)(w,{id:y,onClose:function(){E(!1)},children:Object(c.jsx)("img",{src:R().largeImageURL,alt:R().tags})})]})}s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(k,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.cbfc31d2.chunk.js.map